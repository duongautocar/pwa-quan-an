<h1>ğŸ³ NHÃ€ Báº¾P - TRUNG VIá»†T</h1>
<div id="orders">Äang táº£i Ä‘Æ¡n...</div>

<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
  import { getDatabase, ref, onValue, update } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

  const firebaseConfig = {
    apiKey: window.FIREBASE_API_KEY,
    authDomain: window.FIREBASE_AUTH_DOMAIN,
    databaseURL: window.FIREBASE_DATABASE_URL,
    projectId: window.FIREBASE_PROJECT_ID,
    storageBucket: window.FIREBASE_STORAGE_BUCKET,
    messagingSenderId: window.FIREBASE_MESSAGING_SENDER_ID,
    appId: window.FIREBASE_APP_ID
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase();
  const ordersRef = ref(db, 'orders');

  onValue(ordersRef, (snapshot) => {
    const data = snapshot.val();
    const orderList = document.getElementById('orders');
    orderList.innerHTML = '';

    if (!data) return;

    Object.keys(data).forEach(key => {
      const order = data[key];
      const orderDiv = document.createElement('div');
      orderDiv.style = "background:white;padding:10px;margin:10px;border-radius:8px;";
      orderDiv.innerHTML = `
        <b>[ ${order.table} ] ${order.dish} x${order.quantity}</b>
        ${order.note ? `<div><i>ğŸ“ ${order.note}</i></div>` : ''}
        <div><small>â° ${order.timestamp}</small></div>
        <button ${order.status === 'done' ? 'disabled' : ''} 
                onclick="markDone('${key}')">âœ… ${order.status === 'done' ? 'Xong' : 'HoÃ n thÃ nh'}</button>
      `;
      orderList.appendChild(orderDiv);
    });
  });

  window.markDone = (orderId) => {
    update(ref(db, `orders/${orderId}`), { status: 'done' });
  };
</script>